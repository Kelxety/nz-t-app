<nz-card nzTitle="Item list" [nzExtra]="options" class="m-2 h-[calc(100vh-115px)] overflow-auto"
    [nzBodyStyle]="{'margin-top': '80px', padding: 0, position: 'absolute', bottom: '0px', top: 0, overflow: 'auto', width: '100%'}">
    <nz-content>

        <nz-spin [nzSpinning]="isSpinning">
            <div class="flex flex-col space-y-4 items-center" *ngIf="!dataGridList">
                <div class="flex flex-row flex-wrap gap-4 items-center justify-center">
                    <div *ngFor="let item of itemCardData(); let i = index">
                        <div (click)="onClick(item)" id="i"
                            class="relative group cursor-pointer group overflow-hidden text-gray-50 h-56 w-52 hover:scale-105 hover:shadow-xl rounded-2xl hover:duration-700 duration-700">
                            <div class="w-52 h-56 bg-gray-200 text-gray-800 dark:bg-gray-700">
                                <div class="flex flex-row justify-between z-50 absolute top-0">
                                    <svg class="fill-current stroke-current w-8 h-8 p-2 dark:hover:bg-white hover:bg-gray-300 rounded-full m-1 hover:duration-700 "
                                        height="100" preserveAspectRatio="xMidYMid meet" viewBox="0 0 100 100"
                                        width="100" x="0" xmlns="http://www.w3.org/2000/svg" y="0">
                                        <path class=""
                                            d="M15.8,32.9V15.8m0,0H32.9m-17.1,0L37.2,37.2m47-4.3V15.8m0,0H67.1m17.1,0L62.8,37.2m-47,29.9V84.2m0,0H32.9m-17.1,0L37.2,62.8m47,21.4L62.8,62.8M84.2,84.2V67.1m0,17.1H67.1"
                                            fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="8">
                                        </path>
                                    </svg>

                                </div>
                                <img src="../../../assets//imgs//default_face.png" alt="Italian Trulli"
                                    class="opacity-50 z-0">
                            </div>
                            <div
                                class="absolute bg-gray-200/60 dark:bg-gray-600/60 dark:hover:bg-gray-600 hover:bg-gray-100 -bottom-20 w-56 p-3 flex flex-col gap-1 group-hover:-bottom-0 group-hover:duration-600 duration-500">
                                <span
                                    class="text-black dark:text-white font-bold text-xs items-center mb-6 hover:underline underline-offset-1 uppercase">{{item.subitemName}}</span>
                                <span
                                    class="text-gray-800 dark:text-white font-bold text-xl uppercase hover:underline underline-offset-1">{{item.brandName
                                    | nzSafeNull: '-'}}</span>
                                <p class="text-neutral-800 dark:text-white text-xs">{{item.scmItem.itemDescription |
                                    nzSafeNull: '-' ?? 'N/A'}}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-4 flex space-x-2 items-center">
                    <button [hidden]="!this.pageMode.hasNext" nz-button nzType="primary" [nzShape]="'round'"
                        (click)="onQueryParamsChange()"><span *ngIf="!isSpinning" nz-icon nzType="download"
                            nz-tooltip="Load more" nzTheme="outline"></span><span *ngIf="isSpinning" nz-icon
                            nzType="loading" nz-tooltip="Load more" nzTheme="outline"></span>Load more</button>
                    <p>{{totalData}} / {{total}}</p>
                </div>
            </div>

            <div *ngIf="dataGridList">
                <cdk-virtual-scroll-viewport itemSize="100" class="flex h-[calc(100vh-210px)]">
                    <nz-list nzItemLayout="vertical" class="p-4">
                        <nz-list-item *cdkVirtualFor="let item of ds">
                            <nz-list-item-meta>
                                <nz-list-item-meta-title>
                                    <a href="{{ item.href }}">{{ item.subitemName }}</a>
                                </nz-list-item-meta-title>
                                <nz-list-item-meta-description>
                                    {{ item.brandName | nzSafeNull:'-' }}
                                </nz-list-item-meta-description>
                                <!-- <nz-list-item-meta-description>
                                    {{ item.scmItem.itemDescription | nzSafeNull: '-' }}
                                </nz-list-item-meta-description> -->
                            </nz-list-item-meta>
                        </nz-list-item>
                    </nz-list>
                </cdk-virtual-scroll-viewport>

            </div>
        </nz-spin>
    </nz-content>

</nz-card>


<ng-template #suffixIconSearch>
    <span nz-icon nzType="search"></span>
</ng-template>

<ng-template #suffixIconLoad>
    <span nz-icon nzType="loading"></span>
</ng-template>

<ng-template #options class="stick" #target>
    <div nz-space nzAlign="start" class="flex-row-reverse gap-x-2">
        <nz-input-group *nzSpaceItem [nzSuffix]="this.isSpinning ? suffixIconLoad : suffixIconSearch" nzSearch
            [nzAddOnAfter]="suffixIconButton">
            <input type="text" nz-input placeholder="Search..." name="search" [(ngModel)]="search"
                (keyup.enter)="onSearchFulltext(search)" />
        </nz-input-group>
        <ng-template #suffixIconButton>
            <button nz-button nzType="primary" (click)="onClear()"><span nz-icon nzType="clear" nz-tooltip="Clear"
                    nzTheme="outline"></span></button>
        </ng-template>
        <nz-segmented [nzOptions]="gridList" (nzValueChange)="onChangeList($event)"></nz-segmented>
    </div>
</ng-template>

<ng-template #isLoading>
    <div style="padding: 24px">
        <nz-skeleton [nzActive]="true"></nz-skeleton>
        <nz-skeleton [nzActive]="true"></nz-skeleton>
    </div>
</ng-template>