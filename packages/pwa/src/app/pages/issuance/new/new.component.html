<div class="fixed-content p-2">
    <div nz-row [nzGutter]="8" class="relative w-full h-full">
        <div nz-col nzXs="0" nzSm="0" nzMd="12" nzLg="14" nzXl="16">
            <nz-card nzTitle="Available Items List" [nzExtra]="itemsView" class="h-full w-full" [nzBodyStyle]="{'margin-top': '58px', padding: 0, position: 'absolute', bottom: '0px', top: 0, overflow: 'auto', width: '100%'}">
                <app-item-selector [view]="itemFilter.view" (newItemEvent)="getSelectedItem($event)" [search]="searchChange" [showCost]="true"></app-item-selector>
            </nz-card>
        </div>
        <div nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="10" nzXl="8">
            <nz-card [nzTitle]="cartHeader" class="h-full" [nzBodyStyle]="{'margin-top': '58px', padding: '16px', position: 'absolute', bottom: '144px', top: 0, overflow: 'auto', width: '100%'}">
                <div *ngIf="listOfSelectedItems.length > 0; else noSelected">

                    <div *ngFor="let row of listOfSelectedItems" class="rounded shadow-sm bg-slate-200 hover:bg-slate-300 p-2 mb-1 dark:border dark:border-solid dark:border-[#303030] dark:bg-[#1F1F1F] dark:hover:bg-[#141414]">
                        <div nz-row>
                            <div nz-col nzFlex="auto" nzEllipsis="'true'">{{row.subitemName}}</div>
                            <div nz-col nzFlex="100px" class="text-right">{{row.qty * row.cost | currency: '₱ '}}</div>
                            <div nz-col nzFlex="24px" class="text-right">
                                <span nz-icon nzType="close-circle" nzTheme="outline" class="text-red-500 cursor-pointer hover:text-red-700" (click)="removeItem(row.id)"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <ng-template #noSelected>
                    <div class="text-center w-full">No Selected Item!</div>
                </ng-template>

            </nz-card>
            <div class="w-full absolute bottom-0 h-36 bg-white dark:bg-[#141414] p-4 dark:border-b-0 dark:border-x-[1px] dark:border-t-[1px] dark:border-solid dark:border-[#303030]">
                <div nz-row [nzGutter]="16" class="text-center h-[70px]">
                    <div nz-col class="gutter-row" [nzSpan]="12">
                        <div class="inner-box font-semibold">
                            Total Quantity
                            <div class="inner-box font-bold text-xl">{{totalQty | number: '1.0-0'}}</div>
                        </div>
                    </div>
                    <div nz-col class="gutter-row" [nzSpan]="12">
                        <div class="inner-box font-semibold m-aut">
                            Total  Cost
                            <div class="inner-box font-bold text-xl">{{totalCost | currency: '₱ '}}</div>
                        </div>
                    </div>
                </div>
                <button nz-button nzType="primary" class="h-10 w-full font-bold" nzBloc (click)="add()" [disabled]="listOfSelectedItems.length === 0">PROCEED TO CHECKOUT</button>
            </div>
        </div>
    </div>
</div>


<ng-template #itemsView >
    <nz-input-group [nzSuffix]="suffixIconSearch" class="w-60 mr-2 my-[-4px]">
        <input type="text" nz-input placeholder="input search text" (change)="searchItem($event)"/>
    </nz-input-group>
    <ng-template #suffixIconSearch>
        <span nz-icon nzType="search"></span>
    </ng-template>
    <nz-radio-group [(ngModel)]="itemFilter.view" nzButtonStyle="solid"  class="my-[-4px]">
        <label nz-radio-button nzValue="list">
            <span nz-icon nzType="unordered-list" nzTheme="outline"></span>
        </label>
        <label nz-radio-button nzValue="grid">
            <span nz-icon nzType="appstore" nzTheme="outline"></span>
        </label>
    </nz-radio-group>
</ng-template>

<ng-template #cartHeader>
    <span nz-icon nzType="shopping-cart" nzTheme="outline"></span> Cart
</ng-template>

