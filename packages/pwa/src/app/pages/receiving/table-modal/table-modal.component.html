<div>
    <nz-table nzOuterBordered nzShowSizeChanger #fixedTable [nzData]="itemDataList()" [nzSize]="'default'"
        [nzScroll]="{ y: '300px' }" [nzFooter]="renderFooter"
        (nzCurrentPageDataChange)="onCurrentPageDataChange($event)" [nzPageSize]="10">
        <thead>
            <tr>
                <th colspan="1" nzAlign="center">Item Name</th>
                <th colspan="5"></th>

            </tr>
            <tr>
                <th rowspan="1" nzAlign="center"> <span class="text-gray-400" style="-webkit-transform: scaleX(-1);
                        transform: scaleX(-1);" nz-icon nzType="enter"></span>
                </th>
                <th rowspan="1">Expiration Date</th>
                <th rowspan="1" nzAlign="center">Quantity</th>
                <th rowspan="1" nzAlign="right">Cost</th>
                <th rowspan="1" nzAlign="right">Total Cost</th>
                <th rowspan="1" nzWidth="80px" nzAlign="center">Action</th>
            </tr>
        </thead>
        <tbody *ngFor="let group of fixedTable.data">
            <tr>
                <td nzAlign="center">
                    <span class="font-semibold">
                        {{group?.itemData?.itemName}}</span>
                </td>
                <td nzAlign="left" colspan="4">
                </td>
                <td class="text-right" style="padding-top: 2px; padding-bottom: 2px">

                    <span class="pointer" nz-icon nzType="delete" nzTheme="outline" style="color: red" nz-popconfirm
                        (nzOnConfirm)="removeFromHeaderList(group)"
                        nzPopconfirmTitle="Are you sure you want to delete {{ group?.itemData?.itemName }}"></span>
                </td>
            </tr>

            <tr *ngFor="let data of group.itemDetails">
                <td nzAlign="center"><span class="text-gray-400" style="-webkit-transform: scaleX(-1);
                        transform: scaleX(-1);" nz-icon nzType="enter"></span></td>
                <td>
                    <span class="text-sm">{{
                        data?.expirationDate |
                        date : 'LLL/dd/YYYY'}}</span>
                </td>
                <td class="text-center text-sm">{{ data?.qty }}</td>
                <td nzEllipsis class="text-right text-sm">{{ data?.cost |
                    currency :
                    'PHP'
                    }}</td>
                <td nzEllipsis class="text-right text-sm">{{
                    data?.costAmount | currency
                    : 'PHP'
                    }}</td>
                <td class="text-right" style="padding-top: 2px; padding-bottom: 2px">
                    <span [hidden]="group.loadNow" class="pointer" nz-icon nzType="delete" nzTheme="outline"
                        style="color: red" nz-popconfirm (nzOnConfirm)="removeFromDetailList(group, data)"
                        nzPopconfirmTitle="Are you sure you want to delete {{ group?.itemData?.itemName }} - Exp.{{data?.expirationDate | date: 'shortDate'}}/Lot no. {{data?.lotNo}}"></span>
                    <span *ngIf="group.loadNow" nz-icon nzType="loading" class="text-blue-500" nzTheme="outline"></span>
                    <span *ngIf="group.loadNow === false" class="text-green-400" nz-icon nzType="check-circle"
                        nzTheme="outline"></span>
                    <span *ngIf="group.loadNow === 'ERROR'" class="text-red-500" nz-icon nzType="close-circle"
                        nzTheme="outline"></span>
                </td>
            </tr>
        </tbody>
    </nz-table>
</div>

<ng-template #renderFooter>
    <div class="w-full text-right">
        <p class="font-bold">Total cost: {{this.totalCostAmount() | currency
            : 'PHP'}}</p>
    </div>
</ng-template>