<form nz-form [formGroup]="validateFormDetail" id="validateFormDetail">
    <div class="flex gap-x-2">
        <div>
            <nz-form-item>
                <nz-form-label nzErrorTip="Please select item!" nzLabelAlign="left" nzRequired [nzXs]="24">Select
                    Item</nz-form-label>
                <nz-form-control [nzXs]="24" nzHasFeedback>
                    <nz-select #selectItem nzShowSearch nzAllowClear nzStatus="error" nzAllowClear
                        nzPlaceHolder="Select item" formControlName="selectedItem" id="selectedItem">
                        <nz-option *ngFor="let o of listOfItem" [nzValue]="o" [nzLabel]="o.itemName"></nz-option>
                    </nz-select>
                </nz-form-control>
            </nz-form-item>
            <div class="grid grid-cols-3 gap-x-2 items-center">
                <nz-form-item>
                    <nz-form-label nzLabelAlign="left" [nzXs]="24" nzRequired nzLabelWrap>Location </nz-form-label>
                    <nz-form-control nzFlex="320px" nzSpan="" nzHasFeedback nzErrorTip="Please select a Location!">
                        <nz-select nzShowSearch nzAllowClear [nzDropdownRender]="renderTemplateLocation"
                            formControlName="locationId" id="locationId" nzPlaceHolder="Select location">
                            <nz-option *ngFor="let item of listOfItemLocation" [nzLabel]="item.locName"
                                [nzCustomContent]="true" [nzValue]="item.id">
                                <div class="justify-between">{{item.locName}}</div>
                            </nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
                <nz-form-item>
                    <nz-form-label nzLabelAlign="left" [nzXs]="24" nzFor="expirationDate" nzLabelWrap
                        nzTooltipTitle="Expiration Date">EXP.
                        Date</nz-form-label>
                    <nz-form-control [nzXs]="24">
                        <nz-date-picker formControlName="expirationDate" id="expirationDate"></nz-date-picker>
                    </nz-form-control>
                </nz-form-item>
                <nz-form-item>
                    <nz-form-label nzLabelAlign="left" [nzXs]="24" nzFor="barcodeNo">Barcode</nz-form-label>
                    <nz-form-control [nzXs]="24">
                        <input nz-input formControlName="barcodeNo" id="barcodeNo" placeholder="Barcode" />
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item class="-mt-4">
                    <nz-form-label nzLabelAlign="left" nzHasFeedback [nzXs]="24" nzFor="subitemCode" nzLabelWrap>SubItem
                        Code</nz-form-label>
                    <nz-form-control [nzXs]="24">
                        <input nz-input placeholder="Sub Item code" formControlName="subitemCode" id="subitemCode" />
                    </nz-form-control>
                </nz-form-item>
                <nz-form-item class="-mt-4">
                    <nz-form-label nzErrorTip="Please input your SubItem Name!" nzLabelAlign="left" [nzXs]="24"
                        nzRequired nzFor="subitemName" nzLabelWrap>SubItem
                        Name</nz-form-label>
                    <nz-form-control nzHasFeedback [nzXs]="24">
                        <input nz-input placeholder="Sub Item name" formControlName="subitemName" id="subitemName" />
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item class="-mt-4">
                    <nz-form-label nzErrorTip="Please input your Unit!" nzLabelAlign="left" nzHasFeedback nzRequired
                        [nzXs]="24" nzFor="unitId">Unit</nz-form-label>
                    <nz-form-control [nzXs]="24" nzHasFeedback>
                        <nz-select nzShowSearch nzAllowClear nzStatus="error" nzAllowClear nzPlaceHolder="Select a unit"
                            formControlName="unitId" id="unitId">
                            <nz-option [nzCustomContent]="true" *ngFor="let o of optionList" [nzValue]="o.id"
                                [nzLabel]="o.unitAcro">{{o.unitAcro}} |
                                {{o.unitName}}</nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>


                <nz-form-item class="-mt-4">
                    <nz-form-label nzLabelAlign="left" [nzXs]="24" nzFor="brandName" nzLabelWrap>Brand
                        Name</nz-form-label>
                    <nz-form-control [nzXs]="24" nzFlex="auto">
                        <input class="-mt-4" nz-input formControlName="brandName" id="brandName"
                            placeholder="Brand name" />
                    </nz-form-control>
                </nz-form-item>
                <nz-form-item class="-mt-4">
                    <nz-form-label nzLabelAlign="left" [nzXs]="24" nzFor="lotNo" nzLabelWrap nzRequired>Lot
                        no.</nz-form-label>
                    <nz-form-control [nzXs]="24" nzHasFeedback>
                        <input class="-mt-4" nz-input formControlName="lotNo" id="lotNo" placeholder="Lot. no" />
                    </nz-form-control>
                </nz-form-item>
                <nz-form-item class="-mt-4">
                    <nz-form-label nzLabelAlign="left" [nzXs]="24" nzFor="batchNo" nzLabelWrap>Batch
                        no.</nz-form-label>
                    <nz-form-control [nzXs]="24">
                        <input class="-mt-4" nz-input formControlName="batchNo" id="batchNo" placeholder="Batch no." />
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-x-2 h-56 items-center bg-gray-100  dark:bg-black/40 px-2 shadow-md">
            <nz-form-item>
                <nz-form-label nzLabelAlign="left" nzErrorTip="Please input Cost!" nzRequired [nzXs]="24" nzFor="cost"
                    onchange="onComputeCost">Cost</nz-form-label>
                <nz-form-control [nzXs]="24" nzHasFeedback>
                    <nz-space nzDirection="vertical" class="w-full">
                        <nz-input-number-group *nzSpaceItem nzPrefix="₱" class="w-full">
                            <nz-input-number formControlName="cost" id="cost" [nzStep]="1"></nz-input-number>
                        </nz-input-number-group>
                    </nz-space>
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label nzLabelAlign="left" [nzXs]="24" nzFor="qty" nzRequired
                    nzErrorTip="Please input Quantity!">Quantity</nz-form-label>
                <nz-form-control [nzXs]="24" nzHasFeedback>
                    <input nz-input formControlName="qty" type="number" id="qty" />
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label nzLabelAlign="left" [nzXs]="24" nzFor="markup"
                    onchange="onComputeMarkup">Markup</nz-form-label>
                <nz-form-control [nzXs]="24">
                    <input nz-input formControlName="markup" type="number" id="markup" />
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label nzLabelAlign="left" [nzXs]="24" nzFor="price"
                    nzErrorTip="Please input Price!">Price</nz-form-label>
                <nz-form-control [nzXs]="24" nzHasFeedback>
                    <nz-space nzDirection="vertical" class="w-full">
                        <nz-input-number-group *nzSpaceItem nzPrefix="₱" class="w-full">
                            <nz-input-number formControlName="price" id="price" [nzStep]="1"></nz-input-number>
                        </nz-input-number-group>
                    </nz-space>
                </nz-form-control>
            </nz-form-item>
            <div class=" py-4 space-x-1">
                <span class="font-bold text-sm px-1">
                    Total cost: <span class="font-bold text-lg">
                        {{totalCost() | currency : 'PHP' }}
                    </span>
                </span>
            </div>
        </div>
    </div>
</form>
<ng-template #renderTemplateLocation>
    <nz-divider></nz-divider>
    <span class="text-xs px-2 text-gray-600">Add new Location</span>
    <div class="flex flex-row space-x-2 items-center justify-center p-2">
        <div class="space-y-2 border">
            <nz-select nzShowSearch nzAllowClear [nzDropdownRender]="renderTemplate" class="w-full"
                [(ngModel)]="location.warehouseId" id="warehouseId" nzPlaceHolder="Select warehouse">
                <nz-option *ngFor="let item of listOfItemWarehouse" [nzCustomContent]="true" [nzLabel]="item.whName"
                    [nzValue]="item.id">
                    <div>{{item.whName}} | {{item.whAcro}}</div>
                </nz-option>
            </nz-select>
            <input required type="text" placeholder="Location" [(ngModel)]="location.locName" nz-input />
        </div>
        <a class="flex text-xs items-center justify-center text-center space-x-2" (click)="saveNewLoc()" type="submit">
            <span class="text-sm px-1" nz-icon nzType="plus"></span>
            Location
        </a>
    </div>
</ng-template>

<ng-template #renderTemplate>
    <nz-divider></nz-divider>
    <span class="text-xs px-2 text-gray-600">Add new warehouse</span>
    <div class="flex flex-row space-x-2 items-center justify-center p-2">
        <div class="space-y-2 border">

            <input required type="text" [(ngModel)]="warehouse.whName" nz-input placeholder="Name" />
            <input required type="text" placeholder="Acro" [(ngModel)]="warehouse.whAcro" nz-input />
        </div>
        <a class="flex text-xs items-center justify-center text-center space-x-2" (click)="saveNewWh()" type="submit">
            <span class="text-sm px-1" nz-icon nzType="plus"></span>
            Warehouse
        </a>
    </div>
</ng-template>